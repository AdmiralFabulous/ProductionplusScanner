# EYESON Backend Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=EYESON BodyScan API
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=development

# =============================================================================
# Server Settings
# =============================================================================
HOST=0.0.0.0
PORT=8000
WORKERS=4

# =============================================================================
# Database Settings
# =============================================================================
# PostgreSQL with async driver
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/eyeson
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# Redis for caching and task queue
REDIS_URL=redis://localhost:6379/0
REDIS_POOL_SIZE=50

# =============================================================================
# Security Settings
# =============================================================================
# Generate a secure secret key: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-change-in-production
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=30
ALGORITHM=HS256

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:4173

# =============================================================================
# Storage Settings (S3-compatible)
# =============================================================================
# For local development with MinIO
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_BUCKET=eyeson-scans
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_REGION=us-east-1
STORAGE_SECURE=false

# For AWS S3 production
# STORAGE_ENDPOINT=https://s3.amazonaws.com
# STORAGE_BUCKET=your-production-bucket
# STORAGE_ACCESS_KEY=your-access-key
# STORAGE_SECRET_KEY=your-secret-key
# STORAGE_REGION=us-east-1
# STORAGE_SECURE=true

# =============================================================================
# Video Processing Settings
# =============================================================================
MAX_VIDEO_SIZE_MB=100
VIDEO_CHUNK_SIZE_MB=10
VIDEO_RETENTION_HOURS=24
SUPPORTED_VIDEO_FORMATS=video/mp4,video/webm

# =============================================================================
# Open Source TTS Configuration (Kokoro-82M)
# =============================================================================
TTS_ENABLED=true
TTS_MODEL=onnx-community/Kokoro-82M-ONNX
TTS_DEVICE=cpu
TTS_VOICE=af
TTS_SPEED=1.0
TTS_CACHE_ENABLED=true
TTS_CACHE_DIR=./cache/tts

# Fallback TTS (Piper)
TTS_FALLBACK_ENABLED=true
TTS_FALLBACK_MODEL=en_US-lessac-medium

# =============================================================================
# Speech-to-Text Configuration (Deepgram)
# =============================================================================
STT_ENABLED=true
STT_PROVIDER=deepgram
STT_MODEL=nova-2
STT_LANGUAGE=en
DEEPGRAM_API_KEY=your-deepgram-api-key

# =============================================================================
# ML Service Settings
# =============================================================================
ML_SERVICE_URL=http://localhost:8001
ML_SERVICE_TIMEOUT=60
SAM3D_MODEL_PATH=./models/sam-3d-body
SAM3D_DEVICE=cuda

# =============================================================================
# Inference Optimization
# =============================================================================
INFERENCE_BATCH_SIZE=4
INFERENCE_NUM_WORKERS=2

# =============================================================================
# API Rate Limiting
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# =============================================================================
# Webhook Settings
# =============================================================================
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_SECONDS=5

# =============================================================================
# Scanning Settings
# =============================================================================
DEFAULT_SCAN_DURATION_SECONDS=30
MAX_SCAN_DURATION_SECONDS=45
CALIBRATION_MARKER_SIZE_CM=14.0

# =============================================================================
# Accuracy Targets
# =============================================================================
TARGET_ACCURACY_P0_CM=1.0
TARGET_ACCURACY_P1_CM=2.0
CONFIDENCE_THRESHOLD=0.75

# =============================================================================
# Voice Prompts
# =============================================================================
VOICE_PROMPTS_DIR=./voice_prompts
SUPPORTED_LANGUAGES=en,es,fr,de,zh
DEFAULT_LANGUAGE=en

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# Monitoring
# =============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
TRACING_ENABLED=true
